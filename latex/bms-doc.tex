\ifdefined\isinprint
\documentclass[twoside,10pt]{book}
\usepackage[twoside,paperwidth=155.93mm,paperheight=233.89mm,hmargin={15mm,15mm},vmargin={20mm,20mm},bindingoffset=5mm]{geometry}
\usepackage[hyphens]{url} 
\usepackage[colorlinks=false,
            pdfborder={0 0 0}
	        pdftex,
            plainpages=false,
            pdfauthor={Lukas Ladenberger (Editor)},
            pdftitle={BMotionWeb for ProB Handbook},
            pdfsubject={BMotionWeb},
            pdfkeywords={ProB, Event-B, CSP, Visualization, Tool},
            pdfproducer={http://www.stups.hhu.de/ProB/index.php5/BMotion_Studio},
            pdfcreator={plastex-based tool chain}]{hyperref}
\else
\documentclass[12pt]{book}
\usepackage[left=2.5cm,top=3cm,right=2.5cm,bottom=3cm]{geometry}
\usepackage[hyphens]{url} 
\usepackage[colorlinks=true,
	        pdftex,
            plainpages=false,
            pdfauthor={Lukas Ladenberger (Editor)},
            pdftitle={BMotionWeb for ProB Handbook},
            pdfsubject={BMotionWeb},
            pdfkeywords={ProB, Event-B, CSP, Visualization, Tool},
            pdfproducer={http://www.stups.hhu.de/ProB/index.php5/BMotion_Studio},
            pdfcreator={plastex-based tool chain}]{hyperref}
\fi
\usepackage{graphicx}
\usepackage{bsymb}
\usepackage{b2latex}
\usepackage{fancyhdr,lastpage,color}
\usepackage{verbatim}
\usepackage{wrapfig}
\usepackage{makeidx}
\usepackage{fix-cm}
\usepackage[utf8]{inputenc}

\usepackage{listings}

\usepackage{longtable}

\lstdefinelanguage{Groovy}% 
{morekeywords={abstract,any,as,boolean,break,byte,case,catch,char,class, 
const,continue,def,default,do,double,else,extends,false,final,finally, 
float,for,goto,if,implements,import,instanceof,in,int,interface,label, 
long,native,new,null,package,private,protected,public,return,short, 
static,strictfp,super,switch,synchronized,this,throw,throws,transient, 
true,try,void,volatile,while,with},% 
sensitive=true,% 
morecomment=[l]//,% 
morecomment=[s]{/}{/},% 
morestring=[b]",% 
morestring=[b]',% 
}[keywords,comments,strings]

\lstdefinelanguage{B}% 
{morekeywords={MACHINE, REFINEMENT,OPERATIONS,INITIALISATION,END,BEGIN,PRE,IF,THEN,ELSE,VARIABLES,INVARIANT,SETS},% 
sensitive=true,% 
morecomment=[l]//,% 
morecomment=[s]{/}{/},% 
morestring=[b]",% 
morestring=[b]',% 
}[keywords,comments,strings]

\lstdefinelanguage{JavaScript}{
  basicstyle=\ttfamily\small,
  keywords={typeof, new, true, false, catch, function, return, null, catch, switch, var, if, in, while, do, else, case, break},
  keywordstyle=\color{magenta}\bfseries,
  ndkeywords={class, export, boolean, throw, implements, import, this},
  ndkeywordstyle=\color{magenta}\bfseries,
  identifierstyle=\color{black},
  sensitive=false,
  comment=[l]{//},
  morecomment=[s]{/*}{*/},
  commentstyle=\color{black}\ttfamily,
  stringstyle=\color{blue}\ttfamily,
  morestring=[b]',
  morestring=[b]"
}

\lstset{
  columns=fullflexible,
  numberbychapter=false,
  frame=top,frame=bottom,
  basicstyle=\ttfamily\small,    % the size of the fonts that are used for the code
  stepnumber=1,                           % the step between two line-numbers. If it is 1 each line will be numbered
  numberstyle=\tiny,
  numbersep=5pt,                         % how far the line-numbers are from the code
  tabsize=2,                              % tab size in blank spaces
  extendedchars=true,                     %
  breaklines=true,                        % sets automatic line breaking
  captionpos=b,                           % sets the caption-position to top
  mathescape=false,
  stringstyle=\color{blue}\ttfamily, % Farbe der String
  keywordstyle=\color{magenta}\ttfamily, % Farbe der String
  showspaces=false,           % Leerzeichen anzeigen ?
  showtabs=false,             % Tabs anzeigen ?
  xleftmargin=17pt,
  framexleftmargin=17pt,
  framexrightmargin=17pt,
  framexbottommargin=5pt,
  framextopmargin=5pt,
  showstringspaces=false,      % Leerzeichen in Strings anzeigen ?
  escapechar=\%,
  numbers=left,                    % where to put the line-numbers; possible values are (none, left, right)
  numbersep=5pt
 }

\input{config}
\input{makros}

\title{BMotionWeb for ProB Handbook}
\author{
Work in Progress\\
%Handbook $ $Rev: 16185 $ $ \\
\\
\href{mailto:ladenberger@cs.uni-duesseldorf.de}{ladenberger@cs.uni-duesseldorf.de}\\
\href{http://www.stups.hhu.de/ProB/index.php5/BMotion_Studio}{http://www.stups.hhu.de/ProB/index.php5/BMotion_Studio}
}

\begin{document}        
\pagestyle{empty}
\ifplastex
\maketitle
\else
\pagenumbering{roman}
\begin{titlepage}
\AddToShipoutPicture*{\BackgroundPic}
\vspace*{\titletop}
{\titledimrodin\selectfont \bfseries BMotionWeb}

\vspace*{\titlesubtitledistance}
{\titledimhandbook\selectfont \bfseries Handbook}

\vspace*{\titlesecdistance}
{\titledimsubtext\selectfont \textbf{\textsf{ProB Edition}}}

\vspace*{\titlesecdistance}
{\titledimsubtext\selectfont \textsf{Lukas Ladenberger (Editor)}}

\vspace*{\titlesecdistance}
{\titledimsponsor\selectfont %
  $\hbox{\includegraphics[height=4ex]{img/advance-logo.png}}$
  \textsf{This work is sponsored by the ADVANCE Project}}

\vspace*{\titlebottom}

\end{titlepage}
\ifdefined\isinprint
\cleardoublepage
% Title page
\vspace*{10em}
\begin{center}
  {\huge \textbf{BMotionWeb User's Handbook}}\\
  \vspace{2em}
  {\large ProB Edition}
\end{center}
\clearpage
% Copyright page
\vspace*{\fill}
\noindent\textbf{BMotionWeb User's Handbook}\\
~\\
This work, except the cover image, is licensed under the Creative Commons Attribution-ShareAlike 3.0 Unported License. To view a copy of this license, visit \href{http://creativecommons.org/licenses/by-sa/3.0/}{creative\-com\-mons.org/\-licenses/\-by-sa/3.0/} or send a letter to Creative Commons, 444 Castro Street, Suite 900, Mountain View, California, 94041, USA.\\
The cover image of a Rodin statue was created by Miikka Skaffari.
It is licensed under a Creative Commons Attribution-NonCommercial 3.0 Unported License.  To view a copy of this license, visit \href{http://creativecommons.org/licenses/by-sa/3.0/}{creative\-com\-mons.org/\-licenses/\-by-sa/3.0/} or send a letter to Creative Commons, 444 Castro Street, Suite 900, Mountain View, California, 94041, USA.
\vspace{10em}
\else\fi
\cleardoublepage
\pagenumbering{arabic}
\phantomsection
\addcontentsline{toc}{chapter}{Contents}
\tableofcontents
\fi

\chapter{Introduction}
\label{introduction}

\section{Overview}

This handbook consists of five parts:

\begin{description}
	\item[Introduction (Chapter~\ref{introduction})] You are reading the introduction right now.  Its purpose is to help you orient yourself and to find information quickly.
	\item[First Steps (Chapter~\ref{first_steps})] If you are completely new to BMotionWeb, this section is a good way to get up to speed quickly. 
	It guides you through the installation and usage of the tool.
	\item[BMotionWeb for Event-B and Classical-B (Chapter~\ref{bms4b})] This section provides comprehensive documentation of BMotionWeb for creating visualisations of Event-B or Classical-B models.
	\item[BMotionWeb for CSP (Chapter~\ref{bms4csp})] This section provides comprehensive documentation of BMotionWeb for creating visualisations of CSP-M models.	
	\item[Frequently Asked Questions  (Chapter~\ref{faq})] Common issues are listed by category in the FAQ.
	\item[Index] We included an index particularly for the print version of the handbook, but it may be useful in the electronic versions as well.  
\end{description}

\subsection{Formats of this Handbook}
\label{handbook_formats}

The handbook comes in various formats:

\begin{description}
	\item[Online] You can access the handbook \href{http://nightly.cobra.cs.uni-duesseldorf.de/bmotion/bmotion-prob-handbook/nightly/html/index.html}{online}.
	\item[PDF] Both online versions also include a link to the \href{http://nightly.cobra.cs.uni-duesseldorf.de/bmotion/bmotion-prob-handbook/nightly/pdf/bms-doc.pdf}{PDF} version of the handbook.
\end{description}

\section{Conventions}
\label{conventions}

We use the following conventions in this manual:

\tick{Checklists and milestones are designated with a tick. Here we summarize what we want to learn or should have learned so far.}
\info{Useful information and tricks are designated by the information sign.}
\warning{Potential problems and warnings are designated by a warning sign.}
\pencil{Examples and Code are designated by a pencil.}

We use \texttt{typewriter} font for file names and directories.

We use \textsf{sans serif font} for GUI elements like menus and buttons.  Menu actions are depicted by a chain of elements, separated by ``$\rangle$'', e.g. \textsf{File $\rangle$ Open Visualization}.

\section{ADVANCE}
\label{advance}

This work has been sponsored by the Advance project\footnote{\url{http://www.advance-ict.eu/}}.  ADVANCE is an FP7 Information and Communication Technologies Project funded by the European Commission. The overall objective of ADVANCE is the development of a unified tool-based framework for automated formal verification and simulation-based validation of cyber-physical systems.

The ADVANCE project is unique in addressing both simulation and formal verification within a single design framework.

Unification is being achieved through the use of a common formal modelling language supported by methods and tools for simulation and formal verification. An integrated tool environment is providing support for construction, verification and simulation of models.

ADVANCE is building on an existing formal modelling language - Event-B - and its associated tools environment - Rodin - with strong support for formal verification. In ADVANCE, Rodin is being further strengthened and augmented with novel approaches to multi-simulation and testing.

\input{creative-commons}

% \input{style-guide}

\section{Background}

\subsection{BMotionWeb}

\begin{figure}[!ht]
\begin{center}
	\includegraphics[width=14cm]{img/tutorial/bms_architecture}
	\caption{\bms~Architecture}
	\label{fig_tut_00_architecture}
\end{center}
\end{figure}

Figure~\ref{fig_tut_00_architecture} shows an overview of the architecture of \bms. 
In \bms, a visualisation is described by a visualisation template that contains visual elements and observers. 
Visual elements may be, for instance, shapes or images that represent some aspects of the model. 
For example, when modelling a communication protocol, circles may be used for representing the communicating entities of the protocol and arrows for the message exchanges between the entities. 
\bms~supports web technologies like Scalable Vector Graphics (SVG)\footnote{\url{http://www.w3.org/TR/SVG11}} and Cascading Style Sheets (CSS)\footnote{\url{http://www.w3.org/TR/css-2010}} for this purpose. 
SVG is an XML-based markup language for describing two-dimensional vector graphics. 
It comes with a number of visual elements like shapes, images and paths.
CSS is a language that can be used to describe the style of SVG visual elements (e.g. the colour or the dimension). 

Observers are used to link visual elements with the model. 
An observer is notified whenever a model has changed its state, i.e. whenever an event has been executed. 
In response, the observer will query the model's state and triggers actions on the linked visual elements in respect to the new state. 

\subsection{Formal Modelling}

We are concerned with \textit{formalizing specifications}.  This allows us a more rigorous analysis (thereby improving the quality) and allows the reuse of the specification to develop an implementation.  This comes at the cost of higher up-front investments.

This differs from the traditional development process. In a formal development, we transfer some effort from the test phase (where the implementation is verified) to the specification phase (where the specification in relation to the requirements is verified).

\subsection{Predicate Logic}
\label{predicate_logic}
\index{predicate logic}

Predicate logic is a mathematical logic containing variables that can be quantified.

Event-B supports first-order logic which is, technically speaking, just one type of predicate logic.  

\subsection{Event-B}
\label{eventb}
\index{Event-B}

Event-B is a notation for formal modelling based around an abstract machine notation (\index{abstract machine notation}).

Event-B is considered an evolution of B (also known as Classical B). It is a simpler notation which is easier to learn and use. It comes with tool support in the form of the Rodin Platform.

\subsection{Classical-B}
\label{classicalb}
\index{Classical-B}

\subsection{CSP}
\label{csp}
\index{CSP}

CSP is a notation used mainly for describing concurrent and distributed systems.
There are two major CSP dialects: CSP-M and CSP\#.
In BMotionWeb, we concentrate on the creation of domain specific visualisations for CSP-M models.

\subsection{ProB Animator}
\label{prob_animator}

ProB is a validation toolset for the B method including an animator, a modelchecker and other useful tools to allow users to gain confidence in their specifications. One of the components of ProB is animation. The animation component allows the user to check the presence of desired functionality and to inspect the behaviour of a specification by "clicking through" the states of the specification. ProB also provides other useful tools such as a tool to visualize graphically any predicate as a tree or a tool for graphical state representation. Such tools, especially the tool for the graphical state representation can give a better understanding of the model.

\chapter{First Steps}
\label{first_steps}
\input{first_steps}

\chapter{BMotionWeb}
\label{bms}
\input{reference}

\chapter{BMotionWeb for Event-B and Classical-B}
\label{bms4b}
\input{b}

%\chapter{BMotionWeb for CSP}
%\label{bms4csp}
%\input{csp}

\input{faq}

\clearpage
\phantomsection
\addcontentsline{toc}{chapter}{Index} 
\printindex

\end{document}

